{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../../services/cinema.service\";\nimport * as i4 from \"@angular/forms\";\nfunction ReserveTicketComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 4)(5, \"div\", 5);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 6);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 7);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 8);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 9);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 10);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 11);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(19, \"hr\", 12)(20, \"br\")(21, \"br\");\n    i0.ɵɵelementStart(22, \"h2\");\n    i0.ɵɵtext(23, \"Personal information\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"p\");\n    i0.ɵɵtext(25, \"Please fill in the following inputs and proceed to the next step\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"div\", 13)(27, \"label\");\n    i0.ɵɵtext(28, \"Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"input\", 14);\n    i0.ɵɵlistener(\"ngModelChange\", function ReserveTicketComponent_div_1_Template_input_ngModelChange_29_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.nameInput = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(30, \"div\", 13)(31, \"label\");\n    i0.ɵɵtext(32, \"E-mail:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"input\", 15);\n    i0.ɵɵlistener(\"ngModelChange\", function ReserveTicketComponent_div_1_Template_input_ngModelChange_33_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.emailInput = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(34, \"div\", 13)(35, \"label\");\n    i0.ɵɵtext(36, \"Phone Number:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"input\", 16);\n    i0.ɵɵlistener(\"ngModelChange\", function ReserveTicketComponent_div_1_Template_input_ngModelChange_37_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.phoneNumberInput = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(38, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function ReserveTicketComponent_div_1_Template_button_click_38_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.onProceedClick());\n    });\n    i0.ɵɵtext(39, \"Proceed\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.schedule.movie.title);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", \"Date: \" + ctx_r0.formatDate(ctx_r0.schedule.day), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", \"Time: \" + ctx_r0.schedule.starttime, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", \"Location: \" + ctx_r0.schedule.cinema.name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", \"Price: \" + ctx_r0.schedule.price + \"lei\", \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", \"Director: \" + ctx_r0.schedule.movie.director, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", \"Duration: \" + ctx_r0.schedule.movie.duration + \"min\", \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", \"Genre: \" + ctx_r0.schedule.movie.genre, \" \");\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.nameInput);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.emailInput);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.phoneNumberInput);\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    \"occupied\": a0,\n    \"available\": a1\n  };\n};\nfunction ReserveTicketComponent_div_2_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 22);\n  }\n  if (rf & 2) {\n    const seatIndex_r12 = ctx.index;\n    const rowIndex_r9 = i0.ɵɵnextContext().index;\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(1, _c0, ctx_r10.isSeatOccupied(rowIndex_r9, seatIndex_r12), !ctx_r10.isSeatOccupied(rowIndex_r9, seatIndex_r12)));\n  }\n}\nfunction ReserveTicketComponent_div_2_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtemplate(1, ReserveTicketComponent_div_2_div_5_div_1_Template, 1, 4, \"div\", 21);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.columns);\n  }\n}\nfunction ReserveTicketComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"h2\");\n    i0.ɵɵtext(2, \"Please select your seat\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"hr\", 12);\n    i0.ɵɵelementStart(4, \"div\", 18);\n    i0.ɵɵtemplate(5, ReserveTicketComponent_div_2_div_5_Template, 2, 1, \"div\", 19);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.rows);\n  }\n}\nexport let ReserveTicketComponent = /*#__PURE__*/(() => {\n  class ReserveTicketComponent {\n    constructor(route, datePipe, cinemaService) {\n      this.route = route;\n      this.datePipe = datePipe;\n      this.cinemaService = cinemaService;\n      this.rows = [];\n      this.columns = [];\n      this.nameInput = \"\";\n      this.emailInput = \"\";\n      this.phoneNumberInput = \"\";\n      this.clientid = \"\";\n      this.showFirstStep = false;\n      this.showSecondStep = true;\n    }\n    ngOnInit() {\n      this.route.queryParams.subscribe(data => {\n        this.cinemaService.getScheduleById(data.scheduleid).subscribe(res => {\n          this.schedule = res[0];\n          for (let i = 0; i < this.schedule.cinema.rows; i++) {\n            this.rows.push(i);\n          }\n          for (let i = 0; i < this.schedule.cinema.columns; i++) {\n            this.columns.push(i);\n          }\n        });\n      });\n    }\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return this.datePipe.transform(date, 'dd MMM');\n    }\n    onProceedClick() {\n      if (this.nameInput != \"\" && this.emailInput != \"\" && this.phoneNumberInput != \"\") {\n        this.cinemaService.addClient(this.nameInput, this.emailInput, this.phoneNumberInput).subscribe(res => {\n          this.clientid = res.clientid;\n        });\n      }\n    }\n    isSeatOccupied(rowIndex, seatIndex) {\n      return true;\n    }\n  }\n  ReserveTicketComponent.ɵfac = function ReserveTicketComponent_Factory(t) {\n    return new (t || ReserveTicketComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.DatePipe), i0.ɵɵdirectiveInject(i3.CinemaService));\n  };\n  ReserveTicketComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ReserveTicketComponent,\n    selectors: [[\"app-reserve-ticket\"]],\n    decls: 3,\n    vars: 2,\n    consts: [[1, \"main-content\"], [\"class\", \"reserve-ticket-container\", 4, \"ngIf\"], [1, \"reserve-ticket-container\"], [1, \"movie-info-container\"], [1, \"info-row\"], [1, \"day-cell\"], [1, \"time-cell\"], [1, \"cinema-cell\"], [1, \"price-cell\"], [1, \"director-cell\"], [1, \"duration-cell\"], [1, \"genre-cell\"], [1, \"break-line\"], [1, \"input-row\"], [\"placeholder\", \"Name\", 3, \"ngModel\", \"ngModelChange\"], [\"placeholder\", \"E-mail\", 3, \"ngModel\", \"ngModelChange\"], [\"placeholder\", \"Phone Number\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"], [1, \"movie-legend-container\"], [\"class\", \"row-line\", 4, \"ngFor\", \"ngForOf\"], [1, \"row-line\"], [\"class\", \"seat\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"seat\", 3, \"ngClass\"]],\n    template: function ReserveTicketComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, ReserveTicketComponent_div_1_Template, 40, 11, \"div\", 1);\n        i0.ɵɵtemplate(2, ReserveTicketComponent_div_2_Template, 6, 1, \"div\", 1);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showFirstStep);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showSecondStep);\n      }\n    },\n    dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n    styles: [\".reserve-ticket-container[_ngcontent-%COMP%]{margin-top:40px;width:80%;margin-left:10%;margin-bottom:80px}.info-row[_ngcontent-%COMP%]{padding-left:10px;display:grid;grid-template:\\\"cinema-cell day-cell time-cell price-cell\\\" \\\"director-cell duration-cell genre-cell genre-cell\\\";grid-template-columns:250px 200px 200px auto;gap:10px;height:60px;width:100%;align-items:center}.day-cell[_ngcontent-%COMP%]{grid-area:day-cell}.time-cell[_ngcontent-%COMP%]{grid-area:time-cell}.cinema-cell[_ngcontent-%COMP%]{grid-area:cinema-cell}.price-cell[_ngcontent-%COMP%]{grid-area:price-cell}.duration-cell[_ngcontent-%COMP%]{grid-area:duration-cell}.director-cell[_ngcontent-%COMP%]{grid-area:director-cell}.genre-cell[_ngcontent-%COMP%]{grid-area:genre-cell}.break-line[_ngcontent-%COMP%]{width:20%;border:2px solid #001F3F}input[_ngcontent-%COMP%]{font-size:16px;background-color:transparent;border:0;border-bottom:2px solid #001F3F;outline:none;box-shadow:none;border-radius:4px}button[_ngcontent-%COMP%]{background-color:#001f3f;border-radius:15px;border:1px solid #FFFAF0;color:#fffaf0;opacity:.8;padding:10px 15px;box-shadow:0 2px 5px #0003;transition:color .3s ease-in-out,opacity .3s ease-in-out}button[_ngcontent-%COMP%]:hover{color:gold;opacity:.7}.input-row[_ngcontent-%COMP%]{width:400px;display:flex;justify-content:space-between;margin-bottom:20px}.movie-legend-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px;justify-content:center;align-items:center}.row-line[_ngcontent-%COMP%]{display:flex}.seat[_ngcontent-%COMP%]{width:20px;height:20px;margin:2px;border:1px solid #ccc}.occupied[_ngcontent-%COMP%]{background-color:#b71c1c}.available[_ngcontent-%COMP%]{background-color:#fffaf0}\"]\n  });\n  return ReserveTicketComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}